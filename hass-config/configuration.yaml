homeassistant:
  # Name of the location where Home Assistant is running
  name: !secret home_name
 
  # Location required to calculate the time the sun rises and sets
 
  latitude: !secret home_latitude
  longitude: !secret home_longitude
  
  unit_system: metric

  # Impacts weather/sunrise data
  elevation: !secret home_elevation
  temperature_unit: C
  time_zone: !secret home_timezone

  customize:
    binary_sensor.hallen_sensor:
      friendly_name: Hallen
      device_class: door
    sensor.yr_cloudiness:
      friendly_name: Molnighet
    sensor.yr_wind_direction:
      friendly_name: Vind Riktning
    sensor.yr_wind_speed:
      friendly_name: Vind Hastighet
    sensor.yr_pressure:
      friendly_name: Lufttryck
    sensor.yr_symbol:
      friendly_name: Prognos
    sensor.yr_humidity:
      friendly_name: Luftfuktighet
    sensor.yr_precipitation:
      friendly_name: Regn
    sensor.temperatur_nu:
      icon: mdi:temperature-celsius
    switch.switch_4:
      friendly_name: 'Julgranen'
      icon: mdi:lightbulb-on
    switch.switch_5:
      friendly_name: 'Lampa Hallen'
      device_class: light
      
#icon: mdi:lightbulb-on
 

# Show links to resources in log and frontend
#introduction:

# Enables support for tracking state changes over time.
history:

# Track the sun
sun:

# Checks for available updates
updater:

config:

# Enables the frontend
frontend:

# Allows you to issue voice commands from the frontend
#conversation:

# Discover some devices automatically
#discovery:

# View all events in a logbook
logbook:

influxdb:
  host: !secret influxdb_host
  database: !secret influxdb_database
  username: !secret influxdb_username
  password: !secret influxdb_password

zwave:
  polling_interval: 60000
#  usb_path: /dev/usbzwave


http:
  trusted_networks:
    - 127.0.0.1
    - !secret http_trust

shell_command:
  tell_hallonet: '/config/scripts/zmagnet.sh {{to}}'

#automation: !include automations.yaml

automation:
- alias: Door Open
  trigger:
    platform: state
    entity_id: binary_sensor.hallen_sensor
    to: 'on'
  action:
    service: shell_command.tell_hallonet
    data:
      to: 'on'
- alias: Door Closed
  trigger:
    platform: state
    entity_id: binary_sensor.hallen_sensor
    to: 'off'
  action:
    service: shell_command.tell_hallonet
    data:
      to: 'off'

group:
  default_view:
    name: Ripstigen
    view: no
    entities:
      - binary_sensor.hallen_sensor
      - sensor.temperatur_nu
      - variable.countdown_timer
      - switch.switch_4
      - switch.switch_5
  yr:
    name: YR
    view: no
    entities:
      - sensor.yr_symbol
      - sensor.yr_cloudiness
      - sensor.yr_pressure
      - sensor.yr_precipitation
      - sensor.yr_humidity      
      - sensor.yr_wind_direction
      - sensor.yr_wind_speed
  speedtest:
    name: Speedtest
    view: no
    entities:
      - sensor.speedtest_ping
      - sensor.speedtest_download
      - sensor.speedtest_upload


# Includes

sensor: !include_dir_list sensors/
switch: !include_dir_list switches/


variable:
  countdown_timer:
    value: 30
    restore: true
    attributes:
      friendly_name: 'Countdown'
      unit_of_measurement: "Â°C"
      icon: mdi:alarm
